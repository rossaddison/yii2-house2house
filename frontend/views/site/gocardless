<?php

/* @var $this yii\web\View */

use yii\helpers\Html;
require 'vendor/autoload.php';
$this->title = 'Go Cardless';
$this->params['breadcrumbs'][] = $this->title;

$client = new \GoCardlessPro\Client([
    // We recommend storing your access token in an
    // environment variable for security, but you could
    // include it as a string directly in your code
    //'access_token' => getenv('GC_ACCESS_TOKEN'),
    'access_token' => 'sandbox_Nk2x1UQBF-ZS8Pv0AHkwCxs-cTdk78hIQOsTgU4R',
    // Change me to LIVE when you're ready to go live
    'environment' => \GoCardlessPro\Environment::SANDBOX
]);
?>
<div class="site-gocardless">
    <h1><?= Html::encode($this->title) ?></h1>

    <p>This is the Go Cardless Page</p>
    
    <p>Customers</p>
    <?php
        $customers = $client->customers()->list()->records;
        print_r($customers);
    ?>
    <code><?= __FILE__ ?></code>
</div>
